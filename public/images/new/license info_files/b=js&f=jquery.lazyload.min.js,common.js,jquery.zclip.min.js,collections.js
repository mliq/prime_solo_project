/* Lazy Load 1.9.3 - MIT license - Copyright 2010-2013 Mika Tuupola */
!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);;$$=function(selector)
{if(typeof selector=='undefined')return null;if(selector==='')return null;return(selector.substring(0,1)==='#')?document.getElementById(selector.substring(1)):document.querySelectorAll(selector);};$(document).ready(function(){if(!gr.cookie('cookie_policy')){$("#cookies-alert").show();setTimeout(function(){insertCookiePolicy();},10000);}
$('#cookies-alert .close-cookies').on('click',function(){insertCookiePolicy();});if(ls.logged_data)
{var data=JSON.parse(ls.logged_data);$$(".avatar")[0].src=data.avatar;$$(".username")[0].innerHTML=data.login;$$(".gr_not-connected").forEach(function(a){a.style.display='none';});$$(".gr_connected").forEach(function(a){a.style.display='inline-block';});}
$(document).ajaxStart(function(){loader(true);}).ajaxComplete(function(){loader();});if(typeof(gr.sponsor.coupon)!="undefined")gr.sponsor.coupon.launch();var pngSizes=[16,24,32,64,128,256,512];$(".close_panel").on("click",function(){$$("#backWrapper").style.display="none";document.body.style.overflow="auto";});$("#sizeSlider").slider({min:1,max:7,value:4,step:1,change:function(event,ui){elem=$$("#pngSizeSelected");prev=parseInt(elem.innerHTML,10);next=pngSizes[ui.value-1];counter(prev,next,elem);},stop:function(event,ui){elem=$$("#pngSizeSelected");prev=parseInt(elem.innerHTML,10);next=pngSizes[ui.value-1];counter(prev,next,elem);}});if(typeof downloadPack!=="undefined"){fixButton();$(document).scroll(function(){fixButton();});}
if(typeof selector!="undefined"){var select=$("#selector"),index=$("#selector option").length,slider=$("#rangeSlider").slider({min:1,max:index,range:"min",value:select[0].selectedIndex+1,slide:function(event,ui){select[0].selectedIndex=ui.value-1;},change:function(event,ui){select[0].selectedIndex=ui.value-1;trendingIcons(ui.value);},stop:function(event,ui){trendingIcons(ui.value);}});$("#selector").change(function(){slider.slider("value",this.selectedIndex+1);});for(var x=0;x<index;x++){var txt=$("#selector option:eq("+x+")").text(),left=$("#selector").width()/index*x;if(txt=="hour")txt="1 hour";txt='<li class="tick" style="left: '+left+'px;">'+txt+"</li>";$("#ticksSlider").append(txt);}}
$(document).on("click",".fi-logout",function(){localStorage.clear();});$(document).on("focus",".kwText",function(){this.dataset.tempVal=this.value;}).on("click",".kwText",function(){if(fi[ls.current].lock===0)this.select();}).on("keyup",".kwText",function(e){if(e.keyCode==13)this.blur();}).on("blur",".kwText",function(){var id=this.id.split("-")[1];if(this.value==="")this.value=this.dataset.tempVal;data={"id":id,"keyword":this.value};if(fi[current].lock!==1)
if(this.value!==this.dataset.tempVal){_gaq.push(['_trackEvent','Collections','Change Keyword']);fi[current].iconos["i"+id].keyword=this.value;fi[current].updated=getFormattedDate(new Date());fi[current].push();fi.updateCurrent();var input=$$("#kw-"+id);input.style.background="lightgreen";setTimeout(function(){input.removeAttribute("style");},600);}});$(document).on("click","#urlCollection",function(){this.select();});$(document).on("click",".b64textarea",function(){this.select();});$(".clickme").on("click",function(){toggle($$("#download_dropdown"));});$(document).on("click",".dark-popup",function(){$(".ui-dialog-content").each(function(){if($(this).attr("id")!=="cleanLibraryDialog")$(this).dialog("close");});});var clickmepng=$(".clickme-png"),boxpng=$("#container-myicons-download-png");clickmepng.click(function(e){e.preventDefault();e.stopPropagation();boxpng.slideToggle();});$(".click-show-div").on("click",function(){toggle(byClass("div-expandible")[0]);});posicionarMenu();$(window).scroll(function(){posicionarMenu();});$("#tabs").tabs();$("#tabsEx").tabs();$(document).on("keyup","#searchTxt",function(e){checkKey(e,$$("#searchTxt"));});$(document).on("keyup","#searchTxt2",function(e){checkKey(e,$$("#searchTxt2"));});$("#searchTxt, #searchTxt2").autocomplete({create:function(){$(this).data('ui-autocomplete')._renderItem=function(ul,item){var iconList="";item.iconos.reverse();for(var i=item.iconos.length-1;i>=0;i--){iconList+='<div class="imgResultContainer"><img src="http://cdn.flaticon.com/png/24/'+Math.floor(parseInt(item.iconos[i],10)/1000)+'/'+item.iconos[i]+'.png"></div>';}
return $('<li></li>').data('item.autocomplete',item).append('<a><span class="itemValue">'+item.value+'</span><span class="sizeItem">('+item.size+')</span><div class="iconResultList">'+iconList+'</div></a>').appendTo(ul);};},source:function(data,callback){$.ajax({global:false,url:dom+'/request/autocomplete.php',dataType:'json',data:data,success:callback});},minLength:1,select:function(event,ui){$(this).val(ui.item.value);buscarIcono($$("#"+this.id));}});$(document).on("click",".ui-dialog-titlebar-close",function(){$(".dark-popup").fadeOut(200);});$(document).on("click",".add",function(e){e.stopPropagation();if(fi[current].privada===0){$("#dialog-sharedLimit").dialog("option","title",lang.limit);$("#dialog-sharedLimit").dialog("open");}else{var parent=this.parentNode,id=parent.id,keyword=parent.dataset.kw;if(parent.className=="glyph-container selected"){this.children[0].classList.remove("fi-delete");this.children[0].classList.add("fi-more2");deleteFromCollection(id);}else{if(Object.keys(fi[current].iconos).length<256){fi[current].add(id,keyword);fi[current].updated=getFormattedDate(new Date());$(this).children().removeClass("fi-more2").addClass("fi-delete");createIconElem(id,keyword);$("#selNum").effect("shake",{distance:"5"});}}}});$("#pngButton").on("click",function(e){e.preventDefault();$("#pngsize").slideToggle();$("#b64size").slideUp();});$("#b64Button").on("click",function(e){e.preventDefault();$("#b64size").slideToggle();$("#pngsize").slideUp();});$(".singleDownload").on("click",function(){elem=$$("#imgView");id=elem.getAttribute("data-id");kw=elem.getAttribute("data-kw");download_size=this.getAttribute("rel");if(isNaN(download_size)){acc=download_size;download_size=4;if(acc.length===2){download_size=acc[1];acc="base64";}}else acc="png";data={};data["i"+id]={"id":id,"keyword":kw};download_data=JSON.stringify(data);download_type=acc;singleDownload=true;displayModal(true);});$("#sendForm").click(function(e){e.preventDefault();validarForm();});$("#searchTxt").on("autocompleteopen",function(event,ui){$("#ui-id-1").css("z-index","1000000");});$("#fileField").change(function(){compruebaFile();});$("#fontGenerator #checkLegal").change(function(){compruebaCheck();});$("#fontGenerator #button").click(function(){$("#errorConvertLog").html("");if(compruebaCheck())
if(compruebaFile())convertFont();else compruebaFile();});$("#fontGenerator form").on("submit",function(e){e.preventDefault();});formulario='<form id="form_valuation" class="form_valuation_cl"><div id="open_panel" class="open_panel_cl"><span id="button_panel">+</span></div><div id="valuation_panel" class="valuation_panel_cl"></div></form>';$("body").append(formulario);registerEvents();if(ls.getItem("time_valuation")==10)$("#open_panel").click();if(ls.time_valuation===null||isNaN(ls.time_valuation))ls.time_valuation=1;else{var count_valuation=parseInt(ls.time_valuation,10)+1;ls.time_valuation=count_valuation;}
if($(".plugin-display").length){$(".pluginSearch").autocomplete({create:function(){$(this).data('ui-autocomplete')._renderItem=function(ul,item){return $('<li></li>').data('item.autocomplete',item).append('<a><span class="itemValue">'+item.value+'</span><span class="sizeItem">('+item.size+')</span></a>').appendTo(ul);};},source:function(data,callback){$.ajax({global:false,url:dom+'/request/autocomplete.php',dataType:'json',data:data,success:callback});},minLength:1,select:function(event,ui){$(".pluginSearch").val(ui.item.value);getIcons(ui.item.value);}});$(document).on("click",'.pluginSearch',function(e){var t=$(this).val();if(e.which==13){getIcons(t);}});}
$("#btnChangeName").click(function(){var radios=document.getElementsByName("collectionFrom");for(var i=0,len=radios.length;i<len;++i)
if(radios[i].checked)selected=radios[i].value;if(parseInt(selected,10)===0){fi[tempVar].nombre=($$("#colNewName").value!=="")?$$("#colNewName").value:fi[tempVar].nombre;}else{from=$$("#otherCollections_new").value;iconos=Object.keys(fi[from].iconos).reverse();x=iconos.length;while(x--)
fi[tempVar].add(fi[from].iconos[iconos[x]].id,fi[from].iconos[iconos[x]].keyword,true);fi[tempVar].nombre=($$("#colNewName").value!=="")?$$("#colNewName").value:fi[from].nombre+" 2";}
localStorage.current=tempVar;fi.refresh(true);$("#dialog-alert-edit-name").dialog("close");});$(document).on("click",".pluginIcon",function(){var id=this.id,kw=this.dataset.kw;data={};data["i"+id]={"id":id,"keyword":kw};download_data=JSON.stringify(data);download_type='svg';download_size=4;singleDownload=true;displayModal(true);});$(document).on("click","#clearCollection",function(){showConfirmation();});var dialogOptions={autoOpen:false,closeOnEscape:true,resizable:false,draggable:false,show:{effect:"fadeIn",duration:200},width:470,open:function(){$(".dark-popup").fadeIn(200);document.body.style.overflow="hidden";},close:function(){$(".dark-popup").fadeOut(200);document.body.style.overflow="";},hide:{effect:"fadeOut",duration:200}};$("#container-myicons-collection").dialog(dialogOptions);$("#dialog-alert-edit-name").dialog(dialogOptions);$("#dialog-shared-collection").dialog(dialogOptions);$("#dialog-alert-delete").dialog(dialogOptions);$("#cleanLibraryDialog").dialog(dialogOptions);$("#dialog-sharedLimit").dialog(dialogOptions);$("#dialog-b64image").dialog(dialogOptions);$("#dialog-alert-edit-name").on("dialogclose",function(){localStorage.current=tempVar;fi.refresh(true);});$(document).on("focus","#textfieldColl",function(){this.dataset.tempVal=this.value;}).on("blur","#textfieldColl",function(){var titulo=(this.value!=="")?this.value:"My Icons";this.value=titulo;if(this.dataset.tempVal!=titulo){_gaq.push(['_trackEvent','Collections','Change collection name']);fi[current].nombre=titulo;fi[current].updated=getFormattedDate(new Date());fi[current].push();fi.refresh();}}).on("click","#textfieldColl",function(){this.select();}).on("keyup",function(){elem=$$("#textfieldColl");elem.value=elem.value.replace(/[$<]/g,"");titulo=(elem.value!=="")?elem.value:"My Icons";$("#container-myicons-collection").dialog("option","title",titulo);});$(document).on("click",".candidateCol",function(){elem=$(this);id=elem[0].id;fi.del(id);});$(document).on("click","#addToMyCollections",function(){var sURL=document.URL.split("/"),cId=sURL[sURL.length-1],v=this.dataset.v;if(userId===0){localStorage.atmc=cId;window.location.href=ACCOUNTS_BASE_URL;}else{if(parseInt(v,10)===1){msg={"action":"addToMyCollections","id":cId};conn.msg(msg);this.dataset.v=0;}else{fi.del(cId);if(fi.own().length===0)fi.new();this.dataset.v=1;}
$(".loader").show();setTimeout(function(){window.location.reload();},2000);}});$('input[type=radio][name=collectionFrom]').on('change',function(){select=$$("#otherCollections_new");switch($(this).val()){case'1':select.disabled=false;break;case'0':select.disabled=true;break;}});$(document).on("click","#newFromThis",function(){if(fi.own().length<3||gr.auth.me.premium){fi.new(true,true);$("#dialog-sharedLimit").dialog("close");}});if(typeof localStorage.atmc!=="undefined")window.location.href="/collection/"+localStorage.atmc;if($("#fiemail").length>0)$("#fiemail").attr("href","mailto:info@flaticon.com");$(document).on("change","#checkSorter",function(){var b=($$("#checkSorter").checked)?"p":"a";if(!$$(".pagination").length)sortBy(b,$$("#checkSorter").dataset.e);else window.location.href=updateQueryString('sort',b);});$(document).on("change","#viewSorter",function(){var b=($$("#viewSorter").checked)?"0":"1";window.location.href=updateQueryString('selection',b);});if($("html").height()<$(window).height()){$("#footer").css({"position":"absolute","bottom":"0px","background":"#333","width":"100%"});}
$("#fileFont").change(function(){cambiaNameFont();});$("#svgGenerator form").on("submit",function(e){e.preventDefault();$("#errorCollection").html("");if(compruebaFont()){collectionFromFont();}else{console.log("maaal");}});$("#downloadCollection").on("click",function(e){sURL=document.URL.split("/");cId=sURL[sURL.length-1];if(!gr.auth.logged){window.location.href=ACCOUNTS_BASE_URL;}else{$(".quickDownload").each(function(){$(this).attr("disabled","disabled");});var datos=$$("#dataColl").value,download_type="all",download_data=datos,download_size=4;execute_download();}});$(document).on("click",".external",function(e){e.preventDefault();window.open($(this).attr("href"));});$(document).on("click",".modal-action-button",function(){displayModal(false);});$('body').keyup(function(e){if(e.which===27)displayModal(false);});$(document).mousedown(function(e){var clicked=$(e.target);if(clicked.is('#modal-premium')||clicked.parents().is('#modal-premium'))return;else displayModal(false);});$(".quickDownload").on("click",function(e){e.preventDefault();$(".quickDownload").each(function(){$(this).attr("disabled","disabled");});download_type=this.id;download_data=JSON.stringify(fi[current].iconos);download_size=$("#sizeSlider").slider("option","value");displayModal(true);});$("#btn_attr_download").on("click",function(e){e.preventDefault();execute_download();});$("#give-break").change(function(){if($(this).is(':checked'))
{var date=new Date();localStorage['break_while']=date.setDate(date.getDate()+1);}
else localStorage.removeItem('break_while');});});function triggerPackDownload(){var pack_name=$("#pack_name").html(),pack_icons=parseInt($("#pack_icons").html(),10);_gaq.push(['_trackEvent','download','pack',pack_name,pack_icons]);window.location.href=$("#downloadPackBtn").data("href");}
function insertCookiePolicy()
{var date=new Date();date.setFullYear(date.getFullYear()+1);document.cookie="cookie_policy=true; expires="+date+"; path=/";$("#cookies-alert").slideUp();}
function eventSingleDownload()
{var sizes=[16,24,32,64,128,256,512,'svg'],size=(download_type=='base64'||download_type=='png')?sizes[parseInt(download_size,10)-1]:'',singleDownload=(download_type!='base64')?download_type.toUpperCase()+size:(download_type+" "+size);_gaq.push(['_trackEvent','download','single',singleDownload,1]);}
function displayModal(action)
{if(action){if(new Date()<new Date(parseInt(ls.break_while,10))||gr.auth.me.premium){execute_download();return;}
getAttribution();$('#modal-overlay').fadeIn().addClass('modal-visible');}
else
{$('#modal-overlay').removeClass('modal-visible').fadeOut();$(".quickDownload").each(function(){$(this).removeAttr("disabled");});}}
function loader(display){$$("#loader").style.display=(display)?'block':'none';document.body.style.overflow=(!display)?'auto':'hidden';}
function getAttribution()
{$.ajax({type:"POST",url:dom+"/request/getAttribution.php",global:false,data:"data="+download_data,success:function(result){$$("#attrTxtArea").value='<div>Icons made by '+result+' from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> \
            is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a></div>';}});}
function updateQueryString(key,value,url){if(!url)url=window.location.href;var re=new RegExp("([?&])"+key+"=.*?(&|#|$)(.*)","gi"),hash;if(re.test(url)){if(typeof value!=='undefined'&&value!==null)
return url.replace(re,'$1'+key+"="+value+'$2$3');else{hash=url.split('#');url=hash[0].replace(re,'$1$3').replace(/(&|\?)$/,'');if(typeof hash[1]!=='undefined'&&hash[1]!==null)
url+='#'+hash[1];return url;}}
else{if(typeof value!=='undefined'&&value!==null){var separator=url.indexOf('?')!==-1?'&':'?';hash=url.split('#');url=hash[0]+separator+key+'='+value;if(typeof hash[1]!=='undefined'&&hash[1]!==null)
url+='#'+hash[1];return url;}
else
return url;}}
function validarEmail(email){expr=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!expr.test(email)){return false;}else{return true;}}
function validarForm(){$(".error").each(function(){$(this).removeClass("error");});var nombre=$("#inputName").val(),apellidos=$("#inputSurname").val(),email=$("#inputEmail").val(),texto=$("#texto").val(),opcion=$('input:radio[name=contacto]:checked').val(),emailcorrecto=validarEmail(email),error=false;if(nombre.length<4){$("#inputName").addClass("error");error=true;}
if((apellidos.length<4)){$("#inputSurname").addClass("error");error=true;}
if((texto.length<10)){$("#texto").addClass("error");error=true;}
if(!emailcorrecto){$("#inputEmail").addClass("error");error=true;}
if(!error){txt="";$.ajax({type:"POST",url:dom+"/libraries/contactmail.php",data:"acc=contact&nombre="+nombre+"&apellidos="+apellidos+"&texto="+texto+"&email="+email+"&opcion="+opcion,success:function(data){if(data=="ok"){$("#form").hide();$("#thanks").show();}else if(data==1){$("#form").append(txt+"\n\
                        <a href='mailto:info@flaticon.com'>info@flaticon.com</a>");}}});}}
function updateRibbons(){load=false;$.ajax({global:false,method:"GET",url:dom+'/request/ribbons.php',success:function(data){data=JSON.parse(data);colors={"n":"blue","p":"orange","t":"red"};var k=["n","p","t"],n=k.length,k2,elem;while(n--){if(k[n]==="p"&&typeof popular!=="undefined")continue;if(k[n]==="n"&&typeof last_icons!=="undefined")continue;k2=data[k[n]].length;while(k2--){elem=$$("#"+data[k[n]][k2]);if(elem!==null&&elem.hasClass("glyph-container"))elem.innerHTML+='<div class="ribbon ribbon-small ribbon-'+colors[k[n]]+'">\
                        <div class="banner">\
                    <div class="text">'+lang["ribbon_"+k[n]]+'</div>\
                    </div>\
                    </div>';}}}});}
function compruebaDetalle(){if($$("#detail")!==null){var id=$$("#imgView").getAttribute('data-id'),btnAdd=$$("#webfontButtonAdd"),btnDel=$$("#webfontButtonDel");$(".colName3").html(fi[current].nombre);if(typeof fi[current].iconos["i"+id]!=="undefined"){btnAdd.style.display="none";btnDel.style.display="";}else{btnAdd.style.display="";btnDel.style.display="none";}
if(typeof copied==="undefined"){b64img=$$("#b64Image").innerHTML;b64css=$$("#b64css").innerHTML;copied=true;}}}
function sendSharedCollection(){var elems=byClass("emailShare"),i=elems.length,emails=[];while(i--){email=elems[i].value;if(email.length>0)emails.push(email);}
var post="e="+JSON.stringify(emails)+"&l="+language+"&id="+current+"&u="+userName+"&n="+fi[current].nombre;$.post('/request/shareCollection.php',post,function(data){if(data=="1"){inputs=byClass("emailShare");var i=inputs.length;while(i--){inputs[i].value="";}
if($$("#sharedMailSent")===null){newDiv=document.createElement("div");newDiv.id="sharedMailSent";newDiv.innerHTML='<p><strong>'+lang.send+'</strong></p>';document.body.appendChild(newDiv);}
editorMails=$$("#editorMails");editorMails.innerHTML="";editorMails.appendChild(newDiv);}});}
function newCollection(){if(fi.own().length<3||gr.auth.me.premium){fi.new(true);$("#dialog-alert-edit-name").dialog("option","title",lang.newCol).dialog("open");$$("#colNewName").value="";}}
function collectionSettings(){var settingsTitle=fi[current].nombre,collectionDialog=$("#container-myicons-collection"),width=parseInt(document.documentElement.clientWidth*0.9,10),height=parseInt(document.documentElement.clientHeight*0.9,10);fi.updateCurrent(true);$$("#textfieldColl").value=settingsTitle;action=(collectionDialog.data("active")=="close")?"open":"close";collectionDialog.dialog("open").dialog("option","width",width).dialog("option","height",height).dialog("option","title",settingsTitle).data("active",action);}
function shareCollection(){if(userId===0)window.location.href=ACCOUNTS_BASE_URL+"register";else{id=current;$$("#colShareName").innerHTML=fi[id].nombre;$$("#urlCollection").value=ACCOUNTS_BASE_URL+"user/collection/"+id;$("#dialog-shared-collection").dialog("option","title",lang.share+" '"+fi[id].nombre+"'").dialog("open");}}
function deleteCollection(){id=current;$$("#btnDelCollection").setAttribute("onclick","closeDeleteDialog('"+id+"');");$$("#colDelName").innerHTML=fi[id].nombre;$$("#deleteInfo").innerHTML=fi[id].privada==1?lang.ext:lang.own;$("#dialog-alert-delete").dialog("option","title",lang.del+" '"+fi[id].nombre+"'").dialog("open");}
function updateCurrent(elem){localStorage.current=elem.options[elem.selectedIndex].value;fi.refresh(true);}
function execute_download_old(){displayModal(false);var dd=JSON.parse(download_data);var allowed=["svg","png","psd","eps"];if(Object.keys(dd).length==1&&allowed.indexOf(download_type)!=-1){trdownload(download_type);eventSingleDownload();window.location.href="/download/?dt="+download_type+"&ds="+download_size+"&dd="+download_data+"&uId="+userId;return;}
$.ajax({type:"POST",url:dom+"/request/download.php",data:"acc="+download_type+"&data="+download_data+"&scode="+download_size+"&uId="+userId,success:function(ret){if(download_type=="base64"){var b64css2=b64css.replace("%%B64%%",ret),mime=(download_size<8)?"image/png":"image/svg+xml",pngSizes=[16,24,32,64,128,256,512,200];b64css2=b64css2.replace("%%MIME%%",mime);b64img2=b64img.replace("%%B64%%",ret);$$("#b64css").innerHTML=b64css2.replace(/%%SIZE%%/g,pngSizes[download_size-1]);$$("#b64Image").innerHTML=b64img2.replace("%%MIME%%",mime);$("#dialog-b64image").dialog("option","title",lang.b64);$("#dialog-b64image").dialog("open");if(download_size==8)$$("#svgVectorImg").style.display="block";else $$("#svgVectorImg").style.display="none";}
if(typeof singleDownload!='undefined'&&singleDownload)eventSingleDownload();else{var sizes=[16,24,32,64,128,256,512];var download_event=(download_type=='png')?"PNG_"+sizes[download_size-1]:download_type.toUpperCase();_gaq.push(['_trackEvent','download','collection',download_event,Object.keys(JSON.parse(download_data)).length]);}
singleDownload=false;if(ret!==""&&download_type!='base64'){trdownload(download_type);window.location.href="/download/?t="+ret+"&n="+fi[current].nombre;}}});}
function execute_download(){displayModal(false);var dd=JSON.parse(download_data);var allowed=["svg","png","psd","eps"];var detail=jQuery('#detail .wrapper');var browser=detectBrowser();if((download_type=='png'||download_type=='base64')&&detail.length==1&&Object.keys(dd).length==1)
{if((download_type=='base64'&&typeof document.documentMode!=='undefined')||(typeof document.documentMode!=='undefined'&&(document.documentMode<11)))
{execute_download_old();}
else
{trdownload(download_type);eventSingleDownload();svg2png();return;}}
if(Object.keys(dd).length==1&&allowed.indexOf(download_type)!=-1)
{trdownload(download_type);eventSingleDownload();window.location.href="/download/?dt="+download_type+"&ds="+download_size+"&dd="+download_data+"&uId="+userId;return;}
$.ajax({type:"POST",url:dom+"/request/download.php",data:"acc="+download_type+"&data="+download_data+"&scode="+download_size+"&uId="+userId,success:function(ret){if(download_type=="base64"&&false){var b64css2=b64css.replace("%%B64%%",ret),mime=(download_size<8)?"image/png":"image/svg+xml",pngSizes=[16,24,32,64,128,256,512,200];b64css2=b64css2.replace("%%MIME%%",mime);b64img2=b64img.replace("%%B64%%",ret);$$("#b64css").innerHTML=b64css2.replace(/%%SIZE%%/g,pngSizes[download_size-1]);$$("#b64Image").innerHTML=b64img2.replace("%%MIME%%",mime);$("#dialog-b64image").dialog("option","title",lang.b64);$("#dialog-b64image").dialog("open");if(download_size==8)$$("#svgVectorImg").style.display="block";else $$("#svgVectorImg").style.display="none";}
if(ret!==""&&download_type!='base64'){trdownload(download_type);window.location.href="/download/?t="+ret+"&n="+fi[current].nombre;}
if(typeof singleDownload!='undefined'&&singleDownload)eventSingleDownload();singleDownload=false;}});}
function toggle(el){el.style.display=(el.style.display!='none'?'none':'');}
function fixButton(){scrollTop=$(document).scrollTop();downloadBtn=$$("#downloadPackBtn");if(!downloadBtn.classList.contains("fixedButton")&&scrollTop>=111)downloadBtn.classList.add("fixedButton");else if(downloadBtn.classList.contains("fixedButton")&&scrollTop<111)downloadBtn.classList.remove("fixedButton");}
function trendingIcons(val){$.ajax({type:"POST",url:dom+"/request/trendingIcons.php",data:"request=popular&value="+val,success:function(ret){if(ret!="fail"){$(".centradora-div > .glyph-container").remove();$(".centradora-div").html(ret);fi.updateCurrent();updateRibbons();}}});}
function registerEvents(){$("#open_panel").on("click",function(){if($$("#valuation_text")!==null)$$("#valuation_text").value="";if($$("#open_panel").getElementsByTagName("span")[0].innerHTML=="-"){$("#form_valuation").delay(100).animate({opacity:1,right:"-=252"},"easeOutExpo");setTimeout(function(){$$("#open_panel").getElementsByTagName("span")[0].innerHTML="+";},400);}else{var url_header=window.location.pathname.substr(1),str_url=url_header.split("/").slice(-2)[0],randQuest=Math.floor(Math.random()*2)+0,typeQuestion;switch(true){case/(search|resultados)/.test(str_url):typeQuestion=3;break;case/(free-icon|icono-gratis)/.test(str_url):typeQuestion=4;break;default:typeQuestion=randQuest;break;}
$.ajax({global:false,type:"POST",url:dom+"/request/valuation_form.php",data:"acc=showPoll&typeQuestion="+typeQuestion+"&language="+language,success:function(data){$$("#valuation_panel").innerHTML=data;$("#form_valuation").animate({opacity:1,right:0},"easeOutExpo");$$("#open_panel").getElementsByTagName("span")[0].innerHTML="-";}});}});$(document).on("click","#no_thanks",function(){$("#form_valuation").delay(100).animate({opacity:1,right:"-=252"},"easeOutExpo");setTimeout(function(){$$("#open_panel").getElementsByTagName("span")[0].innerHTML="+";},400);});$(document).on("keyup","#valuation_text",function(){$$("#valuation_message").style.display="none";});$("#form_valuation").submit(function(){var text=$("#valuation_text").val(),last_valuation=$$("#id_last_valuation").value;if($.trim($("#valuation_text").val()).length===0){$("#valuation_message").show();return false;}
$.ajax({type:"POST",url:dom+"/request/valuation_form.php",data:"txtValuation="+text+"&lastValuation="+last_valuation+"&language="+language,success:function(msg){$$("#valuation_panel_txt").style.display="none";$("#valuation_panel").html($("#valuation_congrat").html(msg).show(300));}});return false;});}
function closeDeleteDialog(id){var msg={"action":"deleteCollection","id":id};conn.msg(msg);$("#dialog-alert-delete").dialog("close");if(fi.list().length>1)fi.del(id);else fi[current].iconos.clear();}
function detectBrowser(){var N=navigator.appName,UA=navigator.userAgent,temp,browser=[],browserVersion=UA.match(/(opera|chrome|safari|firefox|msie|maxthon|lunascape)\/?\s*(\.?\d+(\.\d+)*)/i);if(browserVersion&&(temp=UA.match(/version\/([\.\d]+)/i))!==null)browserVersion[2]=temp[1];browser["name"]=browserVersion[1];browser["version"]=browserVersion[2];return browser;}
function checkValuation(numValoration,numQuestion){var browserName=detectBrowser()["name"],browserVersion=detectBrowser()["version"],num_question=numQuestion;$.ajax({type:"POST",url:dom+"/request/valuation_form.php",data:"numValoration="+numValoration+"&browserN="+browserName+"&browserV="+browserVersion+"&numQuestion="+num_question+"&language="+language,success:function(data){var resp=$.parseJSON(data);formulario='<div id="valuation_panel_txt" class="valuation_panel_cl"><textarea id="valuation_text" cols="40" rows="3" class="valuation_text_cl" placeholder="'+resp.plhAnswer+'" maxlength="255"></textarea></br><input type="hidden" id="id_last_valuation" value="'+resp.last_id+'"><div class="cmd_clear">\
            <input type="submit" value="'+resp.texto_w3+'" class="bton_valuation_cl">            <a href="#" class="bton_cancel_cl" id="no_thanks">'+resp.texto_w7+'</a></div><div id="valuation_message" class="valuation_message_cl" style="display:none">'+resp.texto_w1+'</div></div><div id="valuation_congrat" class="valuation_congrat_cl" style="display:none;"></div>';$$("#valuation_panel").innerHTML=formulario;}});}
function resetFormValuation(){$('#valuation_text').val('');}
function launchFacebook(){_gaq.push(['_trackEvent','valuation_facebook','Select']);window.open("http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.flaticon.com%2F","Flaticon & Flaticon","width=750,height=320");$('#open_panel').click();}
function logGooFb(url){window.open(url,"windowname1",'width=800, height=600');}
function deleteFromCollection(id){if(fi[current].privada===0){$("#dialog-sharedLimit").dialog("option","title",lang.limit);$("#dialog-sharedLimit").dialog("open");}else{fi[current].del("i"+id);if($$("#".id))$$("#".id).className="glyph-container";grid=$$("#grid-"+id);settings=$$("#settings-"+id);if(grid!==null)grid.parentNode.removeChild(grid);if(settings!==null)settings.parentNode.removeChild(settings);}}
function getFormattedDate(date){return $.datepicker.formatDate("dd-mm-yy",date)+" "+date.toLocaleTimeString();}
function cleanArray(actual){var newArray=[];for(var i=0;i<actual.length;i++)
if(actual[i])newArray.push(actual[i]);return newArray;}
function checkKey(key,elem){var unicode;if(key.charCode)unicode=key.charCode;else unicode=key.keyCode;term=elem.value;if(unicode===13&&term.length>1)buscarIcono(elem);}
function checkTxt(){elem=$$("#searchTxt2");var txt=elem.value;if(txt!=="")buscarIcono(elem);}
function buscarIcono(elem){if(typeof(gr.sponsor.popup)!="undefined")gr.sponsor.popup.launch();var txt=elem.value,furl=friendly_url(txt);_gaq.push(["_trackEvent","Browse","SearchField"]);_gaq.push(["_trackEvent","Search",language.toUpperCase(),txt]);window.location.href="/s/"+furl;}
function replace_accents(strAccents){strAccents=strAccents.split("");var strAccentsOut=[],strAccentsLen=strAccents.length,accents="\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00d2\u00d3\u00d4\u00d5\u00d5\u00d6\u00d8\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u00c8\u00c9\u00ca\u00cb\u00e8\u00e9\u00ea\u00eb\u00f0\u00c7\u00e7\u00d0\u00cc\u00cd\u00ce\u00cf\u00ec\u00ed\u00ee\u00ef\u00d9\u00da\u00db\u00dc\u00f9\u00fa\u00fb\u00fc\u00d1\u00f1\u0160\u0161\u0178\u00ff\u00fd\u017d\u017e",accentsOut="AAAAAAaaaaaaOOOOOOOooooooEEEEeeeeeCcDIIIIiiiiUUUUuuuuNnSsYyyZz";for(var y=0;y<strAccentsLen;y++)
if(accents.indexOf(strAccents[y])!=-1)strAccentsOut[y]=accentsOut.substr(accents.indexOf(strAccents[y]),1);else strAccentsOut[y]=strAccents[y];strAccentsOut=strAccentsOut.join("");return strAccentsOut;}
function friendly_url(url){url=$.trim(url);url=url.toLowerCase();url=replace_accents(url);rl=$.trim(url);find=[" ","&","\r\n","\n","/+/",","];url=url.preg_replace(find,"-");find=["/[^a-z0-9-<>]/","/[-]+/","/<[^>]*>/"];repl=[" ","-",""];url=url.preg_replace(find,"-");return url;}
String.prototype.str_replace=function(find,replace){var replaceString=this;for(var i=0;i<find.length;i++)replaceString=replaceString.replace(find[i],replace[i]);return replaceString;};String.prototype.preg_replace=function(find,replace){var replaceString=this;var regex;for(var i=0;i<find.length;i++){regex=new RegExp(find[i],"g");replaceString=replaceString.replace(regex,replace[i]);}
return replaceString;};function posicionarMenu(){$$("#masthead").className=(window.scrollY>=$$("#masthead").clientHeight)?"fixed":"";}
function setShareButtons(){var urlsocial=document.URL;$.getJSON("http://urls.api.twitter.com/1/urls/count.json?url="+urlsocial+"&callback=?",function(data){if(data.count!==0&&(data.count!==undefined&&data.count!==null))$(".twitter").append('<span class="counter">'+data.count+"</span>");});$.getJSON("https://graph.facebook.com/?id="+urlsocial+"&callback=?",function(data){if(data.shares!==0&&(data.shares!==undefined&&data.shares!==null))$(".facebook").append('<span class="counter">'+data.shares+"</span>");});$.getJSON("http://api.pinterest.com/v1/urls/count.json?url="+urlsocial+"&callback=?",function(data){if(data.count!==0&&(data.count!==undefined&&data.count!==null))$(".pinterest").append('<span class="counter">'+data.count+"</span>");});var glshare=$("#glbutton").attr("rel-data");if(glshare!==0&&(glshare!==undefined&&glshare!==null))$(".googleplus").append('<span class="counter">'+glshare+"</span>");}
function twpopup(popwhat){window.open(popwhat,"twshare","height=400,width=550,resizable=1,toolbar=0,menubar=0,status=0,location=0");}
function fbpopup(popwhat){window.open(popwhat,"fbshare","height=380,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0");}
function pinpopup(popwhat){window.open(popwhat,"pinshare","height=270,width=630,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0");}
function glpopup(popwhat){window.open(popwhat,"glshare","height=270,width=630,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0");}
function tweet(e){e.preventDefault();window.open('http://twitter.com/share?url='+twURL+'&text='+titleTw+'&','Flaticon Twitter Share','height=450, width=550, top='+($(window).height()/2-225)+', left='+$(window).width()/2+', toolbar=0, location=0, menubar=0, directories=0, scrollbars=0');}
function showAttribution(){counter=(typeof localStorage.attrCounter!=="undefined")?parseInt(localStorage.attrCounter,10):5;if(counter%5===0){elem=byClass("attribution_button");$$("#backWrapper").style.display="block";$$("#how-to-attribute").style.display="block";document.body.style.overflow="hidden";}
counter++;localStorage.attrCounter=counter;}
function acceptAttribution(){document.body.style.overflow="auto";$$("#backWrapper").style.display="none";}
function convertFont(){var file=$("#fileField")[0].files[0];var fileType=file.type;var data=new FormData();data.append("archivo",file);data.append("tipo",fileType);$.ajax({url:dom+"/convert-font/convert.php",type:"POST",contentType:false,data:data,processData:false,cache:false,success:function(ret){if(ret.length==23){_gaq.push(["_trackEvent","convertFont",fileType]);window.location="/download_convert/?id="+ret;}}});}
function compruebaFile(){var file=$("#fileField")[0].files[0],fileName=file.name,fileExtension=fileName.substring(fileName.lastIndexOf(".")+1),fileSize=file.size,fileType=file.type,inputLog=$$("#errorInputLog"),nomFich=$$("#nomFich");if((fileExtension=="ttf"||fileExtension=="otf"||fileExtension=="svg"||fileExtension=="eot"||fileExtension=="woff")&&$("#fileField").val()!==""){nomFich.getElementsByTagName("span")[0].innerHTML=fileName;nomFich.setAttribute("class","visible");inputLog.innerHTML="";inputLog.setAttribute("class","errorConvert no-visible");return true;}else{txt=($("#fileField").val()==="")?"convertErr1":"convertErr3";$.ajax({type:"POST",url:dom+"/request/transerrors.php",data:"acc=trans&txt="+txt,success:function(str){$("#errorInputLog").html(str).removeClass("no-visible").addClass("visible");$("#nomFich span").html("");$$("#nomFich").setAttribute("class","no-visible");}});return false;}}
function compruebaCheck(){if($$("#checkLegal").checked){errorCheckLog=$$("#errorCheckLog");errorCheckLog.innerHTML="";errorCheckLog.setAttribute("class","errorConvert no-visible");return true;}else $.ajax({type:"POST",url:dom+"/request/transerrors.php",data:"acc=trans&txt=convertErr2",success:function(str){errorCheckLog.innerHTML=str;errorCheckLog.setAttribute("class","errorConvert visible");return false;}});}
function downloadPlugin(v){$.ajax({type:"POST",url:dom+"/request/plugin.php",data:"acc=download&v="+v,success:function(data){if(data==1){window.location.href='/plugin-download';}
if(data==2){window.location.href='/plugin-download-cc';}}});}
function getIcons(term){var t=term||"loadPlugin",lang=language;$.ajax({global:false,type:"POST",url:dom+"/request/plugin.php",data:"acc=getIcons&term="+t+"&lang="+lang,success:function(data){$(".pluginResults").html(data);}});}
function counter(init,end,elem){(function loop(){elem.innerHTML=init+"px";if(init<end){if(end-init){init+=4;window.setTimeout(loop,0.01);}}else if(init-end){init-=4;window.setTimeout(loop,0.01);}})();}
function sortBy(type,elem)
{var container=$('.centradora-div');elem=(elem===undefined)?".glyph-container":(elem.charAt(0)!=".")?"."+elem:elem;type=(type=='a')?'id':'data-'+type;container.each(function(){var elems=$(this).children(elem);elems.sort(function(a,b){var an=a.getAttribute(type),bn=b.getAttribute(type);an=(isNaN(an))?an:parseFloat(an);bn=(isNaN(bn))?bn:parseFloat(bn);if(an>bn)return-1;if(an<bn)return 1;return 0;});elems.detach().appendTo($(this));});}
var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-42742855-1"]);_gaq.push(["_setDomainName","flaticon.com"]);_gaq.push(["_setAllowLinker",true]);_gaq.push(["_trackPageview"]);(function(){var ga=document.createElement("script");ga.type="text/javascript";ga.async=true;ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s);})();function trdownload(type){(new Image()).src="http://trk.flaticon.com/trk-download?type="+type+"&r="+Math.random();}
function cambiaNameFont(){var file=$("#fileFont")[0].files[0];if(!file){return false;}
var fileName=file.name,fileExtension=fileName.substring(fileName.lastIndexOf(".")+1),fileSize=file.size,fileType=file.type,inputLog=$$("#errorInputCol"),nomFich=$$("#nomFich");if((fileExtension=="ttf"||fileExtension=="otf"||fileExtension=="svg"||fileExtension=="eot"||fileExtension=="woff")&&$("#fileField").val()!==""){nomFich.getElementsByTagName("span")[0].innerHTML=fileName;nomFich.setAttribute("class","visible");inputLog.innerHTML="";inputLog.setAttribute("class","errorCollection no-visible");return true;}else{txt=($("#fileFont").val()==="")?"convertErr1":"convertErr3";$.ajax({type:"POST",url:dom+"/request/transerrors.php",data:"acc=trans&txt="+txt,success:function(str){$("#errorInputCol").html(str).removeClass("no-visible").addClass("visible");$("#nomFich span").html("");$$("#nomFich").setAttribute("class","no-visible");}});return false;}}
function compruebaFont(){inputOk=false;checkOk=false;var file=$("#fileFont")[0].files[0];if(!file){return false;}
var fileName=file.name,fileExtension=fileName.substring(fileName.lastIndexOf(".")+1),fileSize=file.size,fileType=file.type,inputLog=$$("#errorInputCol"),nomFich=$$("#nomFich");if(nomFich.getElementsByTagName("span")[0].innerHTML==fileName){inputOk=true;}
if($$("#checkLegalCol").checked){errorCheckLog=$$("#errorCheckCol");errorCheckLog.innerHTML="";errorCheckLog.setAttribute("class","errorCollection no-visible");checkOk=true;}else{$.ajax({type:"POST",url:dom+"/request/transerrors.php",data:"acc=trans&txt=convertErr2",success:function(str){errorCheckLog.innerHTML=str;errorCheckLog.setAttribute("class","errorCollection visible");checkOk=false;}});}
if(inputOk===true&&checkOk===true){return true;}else{return false;}}
function collectionFromFont(){if(userId===0){window.location.href=ACCOUNTS_BASE_URL;}
var file=$("#fileFont")[0].files[0],fileType=file.type;var nomFich=$$("#nomFich");var fileName;nomFich.getElementsByTagName("span")[0].innerHTML=fileName;var data=new FormData();data.append("archivo",file);data.append("tipo",fileType);$.ajax({url:"/convert-font/font-collection.php",type:"POST",contentType:false,data:data,processData:false,cache:false,success:function(data){var resp=$.parseJSON(data);$(".padding").html(resp.txtTit);$("#svgGenerator").addClass("no-visible");$("#contentIcon").html(resp.result);$("#btnSave").html(resp.button);}});}
function borraIconFont(dir,fich){$.ajax({url:"/convert-font/font-collection.php",type:"POST",data:"acc=delIcon&dir="+dir+"&fich="+fich,success:function(data){$(".padding").html();$("#svgGenerator").addClass("no-visible");$("#contentIcon").html(data);}});}
function guardaColecc(id){var keys='';$(".keywordText").each(function(){name=$(this).val().replace(" ","");name=name.replace("|","");idIcon=$(this).attr("id").replace(" ","");idIcon=idIcon.replace("|","");placeholder=$(this).attr("placeholder").replace(" ","");placeholder=placeholder.replace("|","");if(name!=""){if(keys==""){keys+=idIcon+"=>"+name;}else{keys+="|"+idIcon+"=>"+name;}}else{if(keys==""){keys+=idIcon+"=>"+placeholder;}else{keys+="|"+idIcon+"=>"+placeholder;}}});$.ajax({url:"/convert-font/font-collection.php",type:"POST",data:"acc=guardaC&idU="+id+"&idUsu="+userId+"&keywords="+keys,success:function(ret){$(".padding").html(ret);$("#contentIcon").html("");$("#btnSave").html("");}});}
$(document).on("click",".pagination a",function(e){e.preventDefault();if(typeof(gr.sponsor.popup)!="undefined")gr.sponsor.popup.launch();window.location.href=$(this).attr('href');});if(!document.documentElement.dataset&&(!Object.getOwnPropertyDescriptor(Element.prototype,'dataset')||!Object.getOwnPropertyDescriptor(Element.prototype,'dataset').get)){var propDescriptor={enumerable:true,get:function(){'use strict';var i,that=this,HTML5_DOMStringMap,attrVal,attrName,propName,attribute,attributes=this.attributes,attsLength=attributes.length,toUpperCase=function(n0){return n0.charAt(1).toUpperCase();},getter=function(){return this;},setter=function(attrName,value){return(typeof value!=='undefined')?this.setAttribute(attrName,value):this.removeAttribute(attrName);};try{({}).__defineGetter__('test',function(){});HTML5_DOMStringMap={};}
catch(e1){HTML5_DOMStringMap=document.createElement('div');}
for(i=0;i<attsLength;i++){attribute=attributes[i];if(attribute&&attribute.name&&(/^data-\w[\w\-]*$/).test(attribute.name)){attrVal=attribute.value;attrName=attribute.name;propName=attrName.substr(5).replace(/-./g,toUpperCase);try{Object.defineProperty(HTML5_DOMStringMap,propName,{enumerable:this.enumerable,get:getter.bind(attrVal||''),set:setter.bind(that,attrName)});}
catch(e2){HTML5_DOMStringMap[propName]=attrVal;}}}
return HTML5_DOMStringMap;}};try{Object.defineProperty(Element.prototype,'dataset',propDescriptor);}catch(e){propDescriptor.enumerable=false;Object.defineProperty(Element.prototype,'dataset',propDescriptor);}}
(function(){if(typeof window.Element==="undefined"||"classList"in document.documentElement)return;var prototype=Array.prototype,push=prototype.push,splice=prototype.splice,join=prototype.join;function DOMTokenList(el){this.el=el;var classes=el.className.replace(/^\s+|\s+$/g,'').split(/\s+/);for(var i=0;i<classes.length;i++){push.call(this,classes[i]);}}
DOMTokenList.prototype={add:function(token){if(this.contains(token))return;push.call(this,token);this.el.className=this.toString();},contains:function(token){return this.el.className.indexOf(token)!=-1;},item:function(index){return this[index]||null;},remove:function(token){if(!this.contains(token))return;for(var i=0;i<this.length;i++){if(this[i]==token)break;}
splice.call(this,i,1);this.el.className=this.toString();},toString:function(){return join.call(this,' ');},toggle:function(token){if(!this.contains(token)){this.add(token);}else{this.remove(token);}
return this.contains(token);}};window.DOMTokenList=DOMTokenList;function defineElementGetter(obj,prop,getter){if(Object.defineProperty){Object.defineProperty(obj,prop,{get:getter});}else{obj.__defineGetter__(prop,getter);}}
defineElementGetter(Element.prototype,'classList',function(){return new DOMTokenList(this);});})();;(function(a){a.fn.zclip=function(c){if(typeof c=="object"&&!c.length){var b=a.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:true,setHandCursor:true,setCSSEffects:true},c);return this.each(function(){var e=a(this);if(e.is(":visible")&&(typeof b.copy=="string"||a.isFunction(b.copy))){ZeroClipboard.setMoviePath(b.path);var d=new ZeroClipboard.Client();if(a.isFunction(b.copy)){e.bind("zClip_copy",b.copy)}if(a.isFunction(b.beforeCopy)){e.bind("zClip_beforeCopy",b.beforeCopy)}if(a.isFunction(b.afterCopy)){e.bind("zClip_afterCopy",b.afterCopy)}d.setHandCursor(b.setHandCursor);d.setCSSEffects(b.setCSSEffects);d.addEventListener("mouseOver",function(f){e.trigger("mouseenter")});d.addEventListener("mouseOut",function(f){e.trigger("mouseleave")});d.addEventListener("mouseDown",function(f){e.trigger("mousedown");if(!a.isFunction(b.copy)){d.setText(b.copy)}else{d.setText(e.triggerHandler("zClip_copy"))}if(a.isFunction(b.beforeCopy)){e.trigger("zClip_beforeCopy")}});d.addEventListener("complete",function(f,g){if(a.isFunction(b.afterCopy)){e.trigger("zClip_afterCopy")}else{if(g.length>500){g=g.substr(0,500)+"...\n\n("+(g.length-500)+" characters not shown)"}e.removeClass("hover");alert("Copied text to clipboard:\n\n "+g)}if(b.clickAfter){e.trigger("click")}});d.glue(e[0],e.parent()[0]);a(window).bind("load resize",function(){d.reposition()})}})}else{if(typeof c=="string"){return this.each(function(){var f=a(this);c=c.toLowerCase();var e=f.data("zclipId");var d=a("#"+e+".zclip");if(c=="remove"){d.remove();f.removeClass("active hover")}else{if(c=="hide"){d.hide();f.removeClass("active hover")}else{if(c=="show"){d.show()}}}})}}}})(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(!a.addClass){a.hide=function(){this.style.display="none"};a.show=function(){this.style.display=""};a.addClass=function(b){this.removeClass(b);this.className+=" "+b};a.removeClass=function(d){var e=this.className.split(/\s+/);var b=-1;for(var c=0;c<e.length;c++){if(e[c]==d){b=c;c=e.length}}if(b>-1){e.splice(b,1);this.className=e.join(" ")}return this};a.hasClass=function(b){return!!this.className.match(new RegExp("\\s*"+b+"\\s*"))}}return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(d,b,c){var a=this.clients[d];if(a){a.receiveEvent(b,c)}},register:function(b,a){this.clients[b]=a},getDOMObjectPosition:function(c,a){var b={left:0,top:0,width:c.width?c.width:c.offsetWidth,height:c.height?c.height:c.offsetHeight};if(c&&(c!=a)){b.left+=c.offsetLeft;b.top+=c.offsetTop}return b},Client:function(a){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);if(a){this.glue(a)}}};ZeroClipboard.Client.prototype={id:0,ready:false,movie:null,clipText:"",handCursorEnabled:true,cssEffects:true,handlers:null,glue:function(d,b,e){this.domElement=ZeroClipboard.$(d);var f=99;if(this.domElement.style.zIndex){f=parseInt(this.domElement.style.zIndex,10)+1}if(typeof(b)=="string"){b=ZeroClipboard.$(b)}else{if(typeof(b)=="undefined"){b=document.getElementsByTagName("body")[0]}}var c=ZeroClipboard.getDOMObjectPosition(this.domElement,b);this.div=document.createElement("div");this.div.className="zclip";this.div.id="zclip-"+this.movieId;$(this.domElement).data("zclipId","zclip-"+this.movieId);var a=this.div.style;a.position="absolute";a.left=""+c.left+"px";a.top=""+c.top+"px";a.width=""+c.width+"px";a.height=""+c.height+"px";a.zIndex=f;if(typeof(e)=="object"){for(addedStyle in e){a[addedStyle]=e[addedStyle]}}b.appendChild(this.div);this.div.innerHTML=this.getHTML(c.width,c.height)},getHTML:function(d,a){var c="";var b="id="+this.id+"&width="+d+"&height="+a;if(navigator.userAgent.match(/MSIE/)){var e=location.href.match(/^https/i)?"https://":"http://";c+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+d+'" height="'+a+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+b+'"/><param name="wmode" value="transparent"/></object>'}else{c+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+d+'" height="'+a+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+b+'" wmode="transparent" />'}return c},hide:function(){if(this.div){this.div.style.left="-2000px"}},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(b){}this.domElement=null;this.div=null}},reposition:function(c){if(c){this.domElement=ZeroClipboard.$(c);if(!this.domElement){this.hide()}}if(this.domElement&&this.div){var b=ZeroClipboard.getDOMObjectPosition(this.domElement);var a=this.div.style;a.left=""+b.left+"px";a.top=""+b.top+"px"}},setText:function(a){this.clipText=a;if(this.ready){this.movie.setText(a)}},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");if(!this.handlers[a]){this.handlers[a]=[]}this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a;if(this.ready){this.movie.setHandCursor(a)}},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(d,f){d=d.toString().toLowerCase().replace(/^on/,"");switch(d){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var c=this;setTimeout(function(){c.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var c=this;setTimeout(function(){c.receiveEvent("load",null)},100);this.ready=true;return}this.ready=true;try{this.movie.setText(this.clipText)}catch(h){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(h){}break;case"mouseover":if(this.domElement&&this.cssEffects){this.domElement.addClass("hover");if(this.recoverActive){this.domElement.addClass("active")}}break;case"mouseout":if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass("active")){this.domElement.removeClass("active");this.recoverActive=true}this.domElement.removeClass("hover")}break;case"mousedown":if(this.domElement&&this.cssEffects){this.domElement.addClass("active")}break;case"mouseup":if(this.domElement&&this.cssEffects){this.domElement.removeClass("active");this.recoverActive=false}break}if(this.handlers[d]){for(var b=0,a=this.handlers[d].length;b<a;b++){var g=this.handlers[d][b];if(typeof(g)=="function"){g(this,f)}else{if((typeof(g)=="object")&&(g.length==2)){g[0][g[1]](this,f)}else{if(typeof(g)=="string"){window[g](this,f)}}}}}}};;var conn=new Communicator(),current,change=false,tempVar,mergedLibrary=true;var ls=localStorage,ss=sessionStorage,byId=function(id){return document.getElementById(id);},byClass=function(className){return document.getElementsByClassName(className);},byTag=function(tag){return document.getElementsByTagName(tag);};function Communicator(){}
Communicator.prototype.msg=function(msg){gr.request.post('collections/manager',msg);};function communicator_callback(ret)
{if(typeof ret!=="undefined"){if(ret!==""){params=ret;switch(params.action){case'newId':var list=fi.list(),x=list.length,zeroIcons=false;while(x--)if(Object.keys(fi[list[x]].iconos).length===0)zeroIcons=true;if(!zeroIcons){if(typeof params.data.ignore!=="undefined")fi.setId(params.data,true);else if(typeof params.data.from!=="undefined")fi.setId(params.data,true,true);else fi.setId(params.data);}
break;case'getLibrary':reloadLibrary(JSON.stringify(params.data),'server');break;case'pullCollection':reloadCollection(params.data);break;case'pushDeletedCollection':fi.del(params.data);break;case'refresh':fi.refresh(true);break;case'updateButton':$$("#btnCollectionShared").innerHTML=params.data.html;$$("#uNum").innerHTML=params.data.num;break;case'pull':fi.pull();break;}}}}
function Library(){}
function Collection(args){if(typeof args.nombre!=="undefined")args.name=args.nombre;this.nombre=args.name||"New Collection";this.id=args.id||"new";this.privada=1;var iconArgs=(typeof args.iconos==='undefined')?{}:args.iconos;this.iconos=new Icongroup(iconArgs)||new Icongroup({});this.updated=args.updated||new Date();this.created=args.created||new Date();}
function Icongroup(args){if(typeof args==="object"){var x=-1,keys=Object.keys(args);while(++x<keys.length)this["i"+args[keys[x]].id]=new Icon(args[keys[x]].id,args[keys[x]].keyword);}}
function Icon(id,keyword){this.id=id;this.keyword=keyword;}
Icongroup.prototype.clear=function(){for(var icon in this)delete this[icon];fi.refresh();};Icon.prototype.setKeyword=function(keyword){this.keyword=keyword;};Collection.prototype.setName=function(name){this.nombre=name;this.updated=getFormattedDate(new Date());fi.refresh();};Collection.prototype.add=function(id,keyword,ignore){this.iconos["i"+id]=new Icon(id,keyword);this.updated=getFormattedDate(new Date());if(typeof ignore==="undefined")fi.refresh();};Collection.prototype.del=function(id){delete this.iconos[id];this.updated=getFormattedDate(new Date());fi.refresh();};Collection.prototype.pull=function(){if(gr.auth.logged)conn.msg({"action":"pull","id":this.id});};Collection.prototype.push=function(){if(gr.auth.logged)conn.msg({"action":"pushCollection","data":this});};Library.prototype.new=function(ignore,from){if(fi.own().length>=3&&!gr.auth.me.premium)return;var msg={"action":"newId","num":this.own().length};if(typeof from!=="undefined"||typeof ignore!=="undefined")msg.from=true;conn.msg(msg);};Library.prototype.setId=function(args,ignore,from){var col=new Collection(args);tempVar=args.id;fi[tempVar]=col;if(from===true){iconos=Object.keys(fi[current].iconos);iconos.reverse();x=iconos.length;while(x--){fi[tempVar].add(fi[current].iconos[iconos[x]].id,fi[current].iconos[iconos[x]].keyword,true);}
fi[tempVar].nombre=fi[current].nombre+" 2";localStorage.current=tempVar;this.refresh(true);return;}
if(!ignore){current=tempVar;localStorage.current=tempVar;this.refresh(true);}};Library.prototype.del=function(id){delete this[id];if(sessionStorage.loading==="false"||typeof sessionStorage.loading==="undefined")
conn.msg({"action":"deleteCollection","id":id});if(localStorage.current==id)localStorage.removeItem("current");this.refresh(true);cleanLibraryDialog();};Library.prototype.pull=function(){if(gr.auth.logged){conn.msg({"action":"getCollections","current":current});}else this.refresh(true);};Library.prototype.push=function(){if(gr.auth.logged&&change){var list=fi.own(),pushData={};for(var i=0;i<list.length;i++)pushData[list[i]]=fi[list[i]];conn.msg({"action":"pushLibrary","data":pushData});change=false;}};Library.prototype.list=function(){var list=[];for(var key in this)if(this.hasOwnProperty(key))list.push(key.toString());return list;};Library.prototype.own=function(){var list=[];for(var key in this)if(this.hasOwnProperty(key))if(parseInt(this[key].privada,10)===1)list.push(key);return list;};Library.prototype.others=function(){var list=[];for(var key in this)if(this.hasOwnProperty(key))if(parseInt(this[key].privada,10)===0)list.push(key);return list;};Library.prototype.refresh=function(loading){var list=this.list(),zeroIcons=false;current=(typeof ls.current!=="undefined"&&typeof this[ls.current]!=="undefined")?ls.current:false;if(!current){current=list[0];ls.current=list[0];}
var own=this.own(),x;x=own.length;if(own.length<1){this.new();return;}
if(own.length>3&&!gr.auth.me.premium){cleanLibraryDialog();return;}
while(x--)zeroIcons=(Object.keys(this[list[x]].iconos).length===0)?true:zeroIcons;var display=(own.length>=3)?"none":"block";$$("#createFromThis").style.display=display;var disabled=false,btnClass="";if(zeroIcons){disabled=true;btnClass+="zeroIcons";}
if(own.length>=3&&!gr.auth.me.premium){disabled=true;btnClass+=" maxAllowed";}
if(disabled)btnClass+=' btnDisabled';btnNewCollection=$$("#btn_newCollection");btnNewCollection.disabled=disabled;btnNewCollection.className=btnClass;selectOwn=$$("#selectOwn");selectOwn.innerHTML="";selectOthers=$$("#selectOther");selectOthers.innerHTML="";x=own.length;$$("#colNumber").innerHTML=this.list().length;selectNewOther=$$("#otherCollections_new");selectNewOther.innerHTML="";while(x--){if(typeof this[own[x]]==="object"){curCollection=(own[x]==current)?" selected":"";text='<option value="'+this[own[x]].id+'"'+curCollection+'>'+this[own[x]].nombre+" ("+Object.keys(this[own[x]].iconos).length+')</option>';selectOwn.innerHTML+=text;selectNewOther.innerHTML+=text;}}
var others=this.others();x=others.length;display=(x===0)?"none":"block";while(x--){if(typeof this[others[x]]==="object"){curCollection="";if(others[x]==current)curCollection=" selected";text='<option value="'+this[others[x]].id+'"'+curCollection+'>'+this[others[x]].nombre+" ("+Object.keys(this[others[x]].iconos).length+')</option>';selectOthers.innerHTML+=text;selectNewOther.innerHTML+=text;}}
selectOthers.style.display=display;$$("#blankCollection").checked=true;this.updateCurrent(loading);};Library.prototype.updateCurrent=function(loading){var keys,privada,nombre,displayInfo,displayGrid,visibility,x,info=$$("#selectInfo"),info2=$$("#selectInfo2"),topButtons=$$("#topMenu"),grid=$$("#iconGrid"),container=$$("#container-col-icons");current=(typeof localStorage.current!=="undefined"&&typeof this[localStorage.current]!=="undefined")?localStorage.current:false;if(!current){current=list[0];localStorage.current=list[0];}
keys=Object.keys(this[current].iconos);privada=this[current].privada;nombre=this[current].nombre;if(keys.length>0){displayInfo="none";displayGrid="";visibility="";}else{visibility="hidden";displayInfo="";displayGrid="none";}
grid.style.display=displayGrid;topButtons.style.visibility=visibility;info.style.display=displayInfo;info2.style.display=displayInfo;$$(".glyph-container").forEach(function(e){e.classList.remove('selected');});$$(".glyph-icon.fi-delete").forEach(function(e){e.classList.remove('fi-delete');e.classList.add('fi-more2');});if(keys.length>0){keys.reverse();x=keys.length;while(x--){var elem=$$("#"+keys[x].substr(1));if(elem!==null){if(!elem.classList.contains("pluginIcon")){elem.classList.add("selected");elem.children[0].children[0].classList.remove("fi-more2");elem.children[0].children[0].classList.add("fi-delete");}}}}
if(parseInt(this[current].privada,10)===0){$$("#btnSettings").disabled=true;$$("#btnSettings").className="btnDisabled";}else{$$("#btnSettings").disabled=false;$$("#btnSettings").className="";}
if($$("#imgView")!==null)
compruebaDetalle();if(loading){keyList=Object.keys(this[current].iconos);keyList=keyList.reverse();grid.innerHTML="";container.innerHTML="";x=keyList.length;while(x--){var id=this[current].iconos[keyList[x]].id,keyword=this[current].iconos[keyList[x]].keyword;createIconElem(id,keyword,this[current].privada);}}
$$("#collTitle").innerHTML=nombre;$$("#selNum").innerHTML=keys.length;color=(Object.keys(this[current].iconos).length===256)?"#666":"rgba(102, 165, 35, 0.8)";$$("#bton-down-icons").style.backgroundColor=color;$$("#collection-spinner").style.display="none";$$(".collection-loaded").forEach(function(item){item.style.display="block";});change=true;localStorage.fi=JSON.stringify(this);if(typeof loading==="undefined")this.push();};function createIconElem(id,keyword,privada){hide='<div class="fi-delete" onclick="deleteFromCollection('+id+');"></div>';var grid=$$("#iconGrid"),settings=$$("#container-col-icons"),iconGrid=document.createElement("div"),iconSettings=document.createElement("div");iconGrid.id="grid-"+id;iconGrid.className="icon-list delGrid";iconGrid.innerHTML='<div class="imgCell"><img src="http://cdn.flaticon.com/png/64/'+Math.floor(id/1000)+'/'+id+'.png"></div>'+hide;grid.insertBefore(iconGrid,grid.childNodes[0]);if(parseInt(privada,10)===1){iconSettings.id="settings-"+id;iconSettings.className="settings-container";iconSettings.innerHTML='<div class="glyph"><div class="glyph-row"><img class="glyphImg" src="http://cdn.flaticon.com/png/64/'+Math.floor(id/1000)+'/'+id+'.png" style="display: inline;">\
        </div></div><a class="del opt" onclick="deleteFromCollection('+id+')"><div class="glyph-icon fi-delete"></div></a><a class="see opt" href="http://www.flaticon.com/i/_'+id+'">\
        <div class="glyph-icon fi-detail"></div></a><div class="glyph-edit-title"><input placeholder="'+keyword+'" type="text" class="kwText" id="kw-'+id+'" value="'+keyword+'"><i class="fi-edit-pencil"></i></div>';settings.insertBefore(iconSettings,settings.childNodes[0]);}}
function reloadLibrary(data,type,new_id){var stored_collections=JSON.parse(data),id;if(typeof ls.current!=="undefined")current=ls.current;for(id in stored_collections)fi[id]=new Collection(stored_collections[id]);if(type==='server')
{if(typeof ls.fi!=="undefined")
{stored_collections=JSON.parse(ls.fi);for(id in stored_collections)fi[id]=new Collection(stored_collections[id]);}}
var keys=Object.keys(fi);if(typeof current==="undefined"||keys.indexOf(current)===-1)current=keys[0];for(id in fi)if(current!=id&&typeof fi[id]==="object"&&Object.keys(fi[id].iconos).length===0)delete fi[id];fi.refresh(true);}
function cleanLibraryDialog(){var dialogClean=$("#cleanLibraryDialog");var width=parseInt(document.documentElement.clientWidth*0.9,10),dialogOptions={dialogClass:"no-close",closeOnEscape:false,autoOpen:false,width:width,resizable:false,draggable:false,show:{effect:"fadeIn",duration:200},open:function(){$(".dark-popup").fadeIn(200);document.body.style.overflow="hidden";},close:function(){$(".dark-popup").fadeOut(200);document.body.style.overflow="";},hide:{effect:"fadeOut",duration:200}};dialogClean.dialog(dialogOptions);if(fi.own().length>3&&!gr.auth.me.premium){var collectionList=$$("#collectionEnumeration"),HTML="",list=fi.own(),n=list.length,divWidth=100/n,i_folder,i_id;while(n--){HTML+='<div class="candidateCol" id="'+fi[list[n]].id+'" style="width: '+divWidth+'%;">\
            <span class="candidateName">'+fi[list[n]].nombre+'</span><div class="candidateIcons">';x=0;icons="";iconList=Object.keys(fi[list[n]].iconos);i=iconList.length;while(i--&&x<6){i_id=fi[list[n]].iconos[iconList[i]].id;i_folder=Math.floor(parseInt(i_id,10)/1000);icons+='<div class="candidadteIcon"><img src="http://cdn.flaticon.com/png/32/'+i_folder+'/'+i_id+'.png"></div>';x++;}
HTML+=icons+'</div></div>';}
collectionList.innerHTML=HTML;dialogClean.dialog("open");dialogClean.dialog('option','position','center');}else{dialogClean.dialog("close");$(".dark-popup").fadeOut(200);document.body.style.overflow="auto";fi.refresh(true);}}
var initLib=function(){fi=new Library();if(!gr.auth.logged)
{if(typeof localStorage.fi!=='undefined')reloadLibrary(localStorage.fi,'local');else fi.refresh(true);}
else
{window.setInterval(fi.push,10000);fi.pull();}};function logged_in_callback(data)
{if(data.status)
{ls.logged_data=JSON.stringify({login:data.login,avatar:data.avatar});$$(".avatar")[0].src=data.avatar;$$(".username")[0].innerHTML=data.login;$$(".gr_not-connected").forEach(function(a){a.style.display='none';});$$(".gr_connected").forEach(function(a){a.style.display='inline-block';});if($$("#downloadPackBtn"))$$("#downloadPackBtn").href+="&uId="+data.id;}
else
{if(ls.logged_data)
{ls.removeItem('fi');ls.removeItem('current');ls.removeItem('logged_data');}
$$(".gr_not-connected").forEach(function(a){a.style.display='inline-block';});$$(".gr_connected").forEach(function(a){a.style.display='none';});ls.removeItem('logged_html');}
userId=data.id||0;initLib();updateRibbons();if($(".plugin-display").length)getIcons();}
function logout_callback(data)
{ls.removeItem('logged_html');ls.removeItem('logged_data');ls.removeItem('fi');window.location=data.redirect_url;}
Element.prototype.hasClass=function(className){return this.className&&new RegExp("(^|\\s)"+className+"(\\s|$)").test(this.className);};